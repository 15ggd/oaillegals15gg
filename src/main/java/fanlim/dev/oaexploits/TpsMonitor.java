package fanlim.dev.oaexploits;

import org.bukkit.Bukkit;
import org.bukkit.scheduler.BukkitRunnable;

public class TpsMonitor {

    private final Oaexploits plugin;
    private double currentTps = 20.0;

    public TpsMonitor(Oaexploits plugin) {
        this.plugin = plugin;
        startMonitoring();
    }

    private void startMonitoring() {
        new BukkitRunnable() {
            @Override
            public void run() {
                updateTps();
            }
        }.runTaskTimer(plugin, 0, 20); // Check TPS every second
    }

    private void updateTps() {
        double[] tps = Bukkit.getTPS();
        currentTps = tps[0]; // Get the 1-minute average TPS
    }

    public double getCurrentTps() {
        return currentTps;
    }
}
